<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Agent OS policy reference. Complete guide to defining governance policies for AI agents including blocked actions, patterns, domains, and YAML configuration.">
    <meta name="keywords" content="Agent OS policies, AI governance rules, policy configuration, blocked actions, YAML policy, AI safety rules">
    <meta name="author" content="Imran Siddique">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://imran-siddique.github.io/agent-os/policies.html">
    
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://imran-siddique.github.io/agent-os/policies.html">
    <meta property="og:title" content="Policy Reference - Agent OS Documentation">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <title>Policy Reference - Agent OS Documentation | Imran Siddique</title>
    <link rel="stylesheet" href="../styles-new.css">
    <link rel="stylesheet" href="agent-os.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="../index.html" class="logo">Imran Siddique</a>
            <ul class="nav-links">
                <li><a href="../index.html">Home</a></li>
                <li><a href="../about.html">About</a></li>
                <li><a href="../projects.html">Projects</a></li>
                <li><a href="index.html" class="active">Agent OS</a></li>
                <li><a href="../writings.html">Writings</a></li>
                <li><a href="../contact.html">Contact</a></li>
            </ul>
            <div class="hamburger"><span></span><span></span><span></span></div>
        </div>
    </nav>

    <main>
        <section class="docs-hero">
            <div class="container">
                <h1>ðŸ“œ Policy Reference</h1>
                <p>Define what your agents can and cannot do</p>
            </div>
        </section>

        <section class="docs-content">
            <div class="container">
                <div class="docs-layout">
                    <aside class="docs-sidebar">
                        <nav class="docs-nav">
                            <h4>On This Page</h4>
                            <ul>
                                <li><a href="#overview">Overview</a></li>
                                <li><a href="#builtin">Built-in Policies</a></li>
                                <li><a href="#custom">Custom Policies</a></li>
                                <li><a href="#yaml">YAML Configuration</a></li>
                                <li><a href="#patterns">Pattern Matching</a></li>
                                <li><a href="#actions">Action Types</a></li>
                                <li><a href="#violations">Violation Handling</a></li>
                                <li><a href="#templates">Policy Templates</a></li>
                            </ul>
                        </nav>
                        <nav class="docs-nav" style="margin-top: 1rem;">
                            <h4>Documentation</h4>
                            <ul>
                                <li><a href="docs.html">Overview</a></li>
                                <li><a href="quickstart.html">Quickstart</a></li>
                                <li><a href="api.html">API Reference</a></li>
                                <li><a href="policies.html" class="active">Policies</a></li>
                                <li><a href="modules.html">Modules</a></li>
                            </ul>
                        </nav>
                    </aside>

                    <div class="docs-main">
                        <h2 id="overview">Overview</h2>
                        <p>Policies are the core of Agent OS governance. They define exactly what agents can and cannot do, with enforcement at the kernel levelâ€”<strong>before</strong> actions execute.</p>

                        <div class="comparison-card solution" style="margin: 1.5rem 0;">
                            <h4>Key Principle</h4>
                            <p>Unlike prompt-based safety ("please don't..."), policies are <strong>enforced deterministically</strong>. If an action is blocked by policy, it never executes. The agent has no choice.</p>
                        </div>

                        <h2 id="builtin">Built-in Policies</h2>
                        <p>Agent OS includes several pre-configured policies:</p>

                        <h3>strict (default)</h3>
                        <p>Maximum safety. Blocks all potentially dangerous operations.</p>
                        <div class="code-block">
                            <pre><code>kernel = KernelSpace(policy="strict")</code></pre>
                        </div>
                        <p><strong>Blocks:</strong> file writes/deletes, shell execution, destructive SQL, PII patterns, unknown domains</p>

                        <h3>permissive</h3>
                        <p>Allows most actions but logs everything for audit.</p>
                        <div class="code-block">
                            <pre><code>kernel = KernelSpace(policy="permissive")</code></pre>
                        </div>
                        <p><strong>Blocks:</strong> Nothing by default<br><strong>Logs:</strong> All actions to flight recorder</p>

                        <h3>read_only</h3>
                        <p>Allows read operations, blocks all writes.</p>
                        <div class="code-block">
                            <pre><code>kernel = KernelSpace(policy="read_only")</code></pre>
                        </div>
                        <p><strong>Blocks:</strong> file_write, file_delete, database_write, database_drop</p>

                        <h3>no_network</h3>
                        <p>Blocks all external network calls.</p>
                        <div class="code-block">
                            <pre><code>kernel = KernelSpace(policy="no_network")</code></pre>
                        </div>

                        <h2 id="custom">Custom Policies</h2>
                        <p>Define policies programmatically in Python:</p>

                        <div class="code-block">
                            <pre><code>from agent_os.policies import Policy, Pattern, ActionType

policy = Policy(
    name="my-custom-policy",
    description="Custom policy for my application",
    
    # Actions to block completely
    blocked_actions=[
        ActionType.FILE_DELETE,
        ActionType.SHELL_EXECUTE,
        ActionType.DATABASE_DROP
    ],
    
    # Actions to allow (if not blocked)
    allowed_actions=[
        ActionType.FILE_READ,
        ActionType.DATABASE_READ,
        ActionType.LLM_CALL
    ],
    
    # Patterns to detect and block
    blocked_patterns=[
        Pattern(r"\bpassword\b", "PII: password detected"),
        Pattern(r"\b\d{3}-\d{2}-\d{4}\b", "PII: SSN format"),
        Pattern(r"DROP\s+TABLE", "Destructive SQL")
    ],
    
    # Network domain allowlist
    allowed_domains=[
        "api.openai.com",
        "api.anthropic.com",
        "*.internal.company.com"
    ],
    
    # What to do on violation
    on_violation="sigkill"  # "sigkill", "sigstop", "sigwarn"
)

kernel = KernelSpace(policy=policy)</code></pre>
                        </div>

                        <h2 id="yaml">YAML Configuration</h2>
                        <p>Policies can be defined in YAML files for easier management:</p>

                        <div class="code-block">
                            <pre><code># policy.yaml
name: production-policy
version: "1.0"
description: Production safety policy

blocked_actions:
  - file_write
  - file_delete
  - shell_execute
  - database_drop

allowed_actions:
  - file_read
  - database_read
  - llm_call
  - network_request

blocked_patterns:
  - pattern: "\\bpassword\\b"
    reason: "PII: password detected"
    severity: high
    
  - pattern: "\\b\\d{3}-\\d{2}-\\d{4}\\b"
    reason: "PII: SSN format detected"
    severity: critical
    
  - pattern: "DROP\\s+TABLE"
    reason: "Destructive SQL blocked"
    severity: critical

allowed_domains:
  - api.openai.com
  - api.anthropic.com
  - "*.company.internal"

blocked_domains:
  - "*.malicious.com"

on_violation: sigkill

# Advanced options
options:
  log_allowed: true       # Log allowed actions too
  audit_pii: true         # Extra PII scanning
  rate_limit: 100         # Max actions per minute</code></pre>
                        </div>

                        <p>Load from YAML:</p>
                        <div class="code-block">
                            <pre><code># Load from file path
kernel = KernelSpace(policy="./policies/production.yaml")

# Or load explicitly
from agent_os.policies import Policy
policy = Policy.from_yaml("./policies/production.yaml")
kernel = KernelSpace(policy=policy)</code></pre>
                        </div>

                        <h2 id="patterns">Pattern Matching</h2>
                        <p>Patterns use regular expressions to detect sensitive content:</p>

                        <div class="code-block">
                            <pre><code>from agent_os.policies import Pattern

patterns = [
    # PII Detection
    Pattern(r"\b\d{3}-\d{2}-\d{4}\b", "SSN format"),
    Pattern(r"\b\d{16}\b", "Credit card number"),
    Pattern(r"\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b", "Email"),
    Pattern(r"\b\d{3}[-.]?\d{3}[-.]?\d{4}\b", "Phone number"),
    
    # Dangerous SQL
    Pattern(r"DROP\s+(TABLE|DATABASE)", "Destructive DDL"),
    Pattern(r"DELETE\s+FROM\s+\w+\s*;", "Mass delete"),
    Pattern(r"TRUNCATE\s+TABLE", "Table truncation"),
    
    # Shell injection
    Pattern(r";\s*rm\s+-rf", "Shell injection"),
    Pattern(r"\|\s*sh\b", "Pipe to shell"),
    
    # Secrets
    Pattern(r"(api[_-]?key|secret|password)\s*[=:]\s*['\"][^'\"]+['\"]", "Hardcoded secret")
]</code></pre>
                        </div>

                        <h3>Pattern Severity Levels</h3>
                        <table>
                            <thead><tr><th>Severity</th><th>Behavior</th><th>Use Case</th></tr></thead>
                            <tbody>
                                <tr><td><code>low</code></td><td>Log only</td><td>Style issues, soft warnings</td></tr>
                                <tr><td><code>medium</code></td><td>Log + SIGWARN</td><td>Potential issues</td></tr>
                                <tr><td><code>high</code></td><td>Log + SIGSTOP</td><td>Serious violations, needs review</td></tr>
                                <tr><td><code>critical</code></td><td>Log + SIGKILL</td><td>Security violations, must block</td></tr>
                            </tbody>
                        </table>

                        <h2 id="actions">Action Types</h2>
                        <p>Complete list of action types that can be blocked or allowed:</p>

                        <h3>File Operations</h3>
                        <table>
                            <thead><tr><th>Action</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td><code>file_read</code></td><td>Read from filesystem</td></tr>
                                <tr><td><code>file_write</code></td><td>Write to filesystem</td></tr>
                                <tr><td><code>file_delete</code></td><td>Delete files/directories</td></tr>
                                <tr><td><code>file_execute</code></td><td>Execute files</td></tr>
                            </tbody>
                        </table>

                        <h3>Database Operations</h3>
                        <table>
                            <thead><tr><th>Action</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td><code>database_read</code></td><td>SELECT queries</td></tr>
                                <tr><td><code>database_write</code></td><td>INSERT, UPDATE queries</td></tr>
                                <tr><td><code>database_drop</code></td><td>DROP, TRUNCATE operations</td></tr>
                                <tr><td><code>database_admin</code></td><td>Admin operations (GRANT, etc.)</td></tr>
                            </tbody>
                        </table>

                        <h3>System Operations</h3>
                        <table>
                            <thead><tr><th>Action</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td><code>shell_execute</code></td><td>Run shell commands</td></tr>
                                <tr><td><code>process_spawn</code></td><td>Spawn new processes</td></tr>
                                <tr><td><code>network_request</code></td><td>HTTP/network calls</td></tr>
                                <tr><td><code>llm_call</code></td><td>LLM API invocations</td></tr>
                            </tbody>
                        </table>

                        <h2 id="violations">Violation Handling</h2>
                        <p>Configure what happens when a policy is violated:</p>

                        <div class="code-block">
                            <pre><code>policy = Policy(
    name="my-policy",
    on_violation="sigkill",  # Default: terminate immediately
    # Options: "sigkill", "sigstop", "sigwarn", "log_only"
)</code></pre>
                        </div>

                        <table>
                            <thead><tr><th>Mode</th><th>Signal</th><th>Behavior</th></tr></thead>
                            <tbody>
                                <tr><td><code>sigkill</code></td><td>SIGKILL</td><td>Immediate termination, action blocked</td></tr>
                                <tr><td><code>sigstop</code></td><td>SIGSTOP</td><td>Pause for human review</td></tr>
                                <tr><td><code>sigwarn</code></td><td>SIGWARN</td><td>Warning logged, action proceeds</td></tr>
                                <tr><td><code>log_only</code></td><td>None</td><td>Log violation, action proceeds</td></tr>
                            </tbody>
                        </table>

                        <h3>Custom Violation Handlers</h3>
                        <div class="code-block">
                            <pre><code>from agent_os.policies import Policy, ViolationHandler

class MyHandler(ViolationHandler):
    async def on_violation(self, violation):
        # Log to external system
        await log_to_siem(violation)
        
        # Send alert
        if violation.severity == "critical":
            await send_pagerduty_alert(violation)
        
        # Return action: "block", "allow", "pause"
        return "block"

policy = Policy(
    name="my-policy",
    violation_handler=MyHandler()
)</code></pre>
                        </div>

                        <h2 id="templates">Policy Templates</h2>
                        <p>Pre-built templates for common use cases:</p>

                        <h3>Healthcare (HIPAA)</h3>
                        <div class="code-block">
                            <pre><code>from agent_os.policies.templates import hipaa_standard

kernel = KernelSpace(policy=hipaa_standard())</code></pre>
                        </div>
                        <p>Includes: PHI detection, audit logging, access controls, breach alerting</p>

                        <h3>Finance (SOC 2)</h3>
                        <div class="code-block">
                            <pre><code>from agent_os.policies.templates import soc2_compliant

kernel = KernelSpace(policy=soc2_compliant())</code></pre>
                        </div>
                        <p>Includes: PII/PCI detection, access logging, rate limiting</p>

                        <h3>Education (COPPA)</h3>
                        <div class="code-block">
                            <pre><code>from agent_os.policies.templates import k12_safe

kernel = KernelSpace(policy=k12_safe(max_age=13))</code></pre>
                        </div>
                        <p>Includes: Age-appropriate content, PII rejection, parent visibility</p>

                        <h3>Enterprise</h3>
                        <div class="code-block">
                            <pre><code>from agent_os.policies.templates import enterprise_standard

kernel = KernelSpace(policy=enterprise_standard(
    allowed_domains=["*.company.com"],
    require_auth=True
))</code></pre>
                        </div>

                        <h3>Combining Templates</h3>
                        <div class="code-block">
                            <pre><code>from agent_os.policies import Policy
from agent_os.policies.templates import hipaa_standard, enterprise_standard

# Merge multiple templates
policy = Policy.merge([
    hipaa_standard(),
    enterprise_standard(),
    Policy(blocked_patterns=[...])  # Additional custom rules
])

kernel = KernelSpace(policy=policy)</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Agent OS</h4>
                    <p>Kernel-level governance for autonomous AI agents</p>
                    <p class="footer-version">v1.1.0 | MIT License</p>
                </div>
                <div class="footer-section">
                    <h4>Documentation</h4>
                    <ul>
                        <li><a href="quickstart.html">Quickstart</a></li>
                        <li><a href="api.html">API Reference</a></li>
                        <li><a href="policies.html">Policy Reference</a></li>
                        <li><a href="modules.html">Modules</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="integrations.html">Integrations</a></li>
                        <li><a href="use-cases.html">Use Cases</a></li>
                        <li><a href="https://github.com/imran-siddique/agent-os" target="_blank">GitHub</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Connect</h4>
                    <ul>
                        <li><a href="https://github.com/imran-siddique" target="_blank">GitHub</a></li>
                        <li><a href="https://linkedin.com/in/imransiddique1986" target="_blank">LinkedIn</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 Imran Siddique. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="../script.js"></script>
</body>
</html>
